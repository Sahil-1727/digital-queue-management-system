{% extends "base.html" %}

{% block title %}Login - QueueFlow{% endblock %}

{% block meta_description %}Sign in to QueueFlow to book tokens, track your queue status, and manage your service center visits.{% endblock %}

{% block extra_css %}
<style>
.auth-icon {
 font-size: 4rem;
 margin-bottom: var(--space-md);
}

.gradient-text {
 background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 background-clip: text;
}

.password-toggle {
 position: absolute;
 right: 12px;
 top: 50%;
 transform: translateY(-50%);
 cursor: pointer;
 color: var(--text-muted);
 transition: color var(--transition-fast);
}

.password-toggle:hover {
 color: var(--text-primary);
}
</style>
{% endblock %}

{% block content %}
<div class="auth-split-container" id="main-content">
 <div class="auth-brand-panel">
 <div class="auth-brand-content">
 <div class="auth-brand-logo">üé´</div>
 <h2 class="auth-brand-title">Welcome Back to QueueFlow</h2>
 <p class="auth-brand-subtitle">Skip the wait, track in real-time, and manage your service center visits effortlessly.</p>
 <ul class="auth-brand-features">
 <li>Real-time queue tracking</li>
 <li>Digital token management</li>
 <li>Smart wait time estimates</li>
 <li>Instant notifications</li>
 </ul>
 </div>
 </div>
 <div class="auth-form-panel">
 <div class="auth-form-wrapper">
 <div class="text-center mb-4">
 <h1 class="gradient-text mb-2">Sign In</h1>
 <p class="text-muted">Login to book tokens or track registration</p>
 </div>
 
 {% with messages = get_flashed_messages(with_categories=true) %}
 {% if messages %}
 {% for category, message in messages %}
 <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
 {{ message }}
 <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
 </div>
 {% endfor %}
 {% endif %}
 {% endwith %}
 
 <form method="POST">
 <div class="mb-3">
 <label for="mobile" class="form-label">Mobile Number or Email</label>
 <input type="text" class="form-control" id="mobile" name="mobile" placeholder="Enter mobile number or email" required>
 </div>
 <div class="mb-4">
 <label for="password" class="form-label">Password</label>
 <div class="position-relative">
 <input type="password" class="form-control" id="password" name="password" placeholder="Enter your password" required>
 <span class="password-toggle" onclick="togglePassword()" aria-label="Toggle password visibility">
 <svg width="20" height="20" fill="currentColor" id="eyeIcon">
 <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22" stroke="currentColor" stroke-width="2" fill="none"/>
 </svg>
 </span>
 </div>
 </div>
 <button type="submit" class="btn btn-primary btn-lg w-100 mb-3">Sign In</button>
 </form>
 
 <div class="text-center mb-3">
 <a href="{{ url_for('forgot_password') }}" class="text-muted">Forgot Password?</a>
 </div>
 
 <div class="text-center">
 <button id="dark-mode-toggle" onclick="toggleDarkMode()" style="width:38px;height:38px;border-radius:50%;border:1px solid var(--border-medium);background:var(--bg-soft);cursor:pointer;font-size:1rem;display:inline-flex;align-items:center;justify-content:center;transition:all 0.2s ease;margin-bottom:12px;" aria-label="Toggle dark mode">‚òÄÔ∏è</button>
 <p class="mb-2">New user? <a href="{{ url_for('register') }}">Sign up</a></p>
 <p class="mb-0"><a href="{{ url_for('index') }}" class="text-muted">‚Üê Back to Home</a></p>
 </div>
 </div>
 </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function togglePassword() {
 const input = document.getElementById('password');
 const icon = document.getElementById('eyeIcon');
 if (input.type === 'password') {
 input.type = 'text';
 icon.innerHTML = '<circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="2"/><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" fill="none" stroke="currentColor" stroke-width="2"/>';
 } else {
 input.type = 'password';
 icon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24M1 1l22 22" stroke="currentColor" stroke-width="2" fill="none"/>';
 }
}
</script>
{% endblock %}
